From b166b1053c1649d9ec3c704d6c8f1f7b54feb778 Mon Sep 17 00:00:00 2001
From: ci7lus <7887955+ci7lus@users.noreply.github.com>
Date: Sun, 15 Feb 2026 01:24:37 +0900
Subject: [PATCH] chore: fixup

---
 modules/demux/mpeg/ts_si.c |  2 ++
 src/input/es_out.c         | 29 ++++++++++++++++++++++++++---
 2 files changed, 28 insertions(+), 3 deletions(-)

diff --git a/modules/demux/mpeg/ts_si.c b/modules/demux/mpeg/ts_si.c
index 7b7ae929e9..e8770c7f79 100644
--- a/modules/demux/mpeg/ts_si.c
+++ b/modules/demux/mpeg/ts_si.c
@@ -283,6 +283,8 @@ static void SDTCallBack( void *opaque, dvbpsi_sdt_t *p_sdt )
                 }
                 if (p_sys->standard == TS_STANDARD_ARIB)
                 {
+                    msg_Info( p_demux, "  * service id=%d is ARIB, setting Artist to %s",
+                             p_srv->i_service_id, str2 );
                     vlc_meta_SetArtist(p_meta, str2);
                 }
                 free( str1 );
diff --git a/src/input/es_out.c b/src/input/es_out.c
index 0699bb44f6..ebe32c0db3 100644
--- a/src/input/es_out.c
+++ b/src/input/es_out.c
@@ -1643,8 +1643,11 @@ static void EsOutProgramSelect(es_out_sys_t *p_sys, es_out_pgrm_t *p_pgrm)
                                     vlc_meta_Get( p_pgrm->p_meta, vlc_meta_ESNowPlaying ) );
         input_item_SetPublisher( input_priv(p_input)->p_item,
                                  vlc_meta_Get( p_pgrm->p_meta, vlc_meta_Publisher ) );
-        input_item_SetTitle( input_priv(p_input)->p_item,
-                             vlc_meta_Get( p_pgrm->p_meta, vlc_meta_Title ) );
+        const char *psz_title = vlc_meta_Get( p_pgrm->p_meta, vlc_meta_ESNowPlaying );
+        if( !psz_title )
+            psz_title = vlc_meta_Get( p_pgrm->p_meta, vlc_meta_Title );
+        input_item_SetTitle( input_priv(p_input)->p_item, psz_title );
+        EsOutMeta( p_sys, NULL, p_pgrm->p_meta );
         input_SendEventMeta( p_input );
         /* FIXME: we probably want to replace every input meta */
     }
@@ -2039,6 +2042,15 @@ static void EsOutProgramEpg(es_out_sys_t *p_sys, input_source_t *source,
                                      vlc_meta_Get( p_pgrm->p_meta, vlc_meta_ESNowPlaying ) : NULL;
 
         input_item_SetESNowPlaying( input_priv(p_input)->p_item, psz_nowplaying );
+        if( psz_nowplaying )
+        {
+            msg_Dbg( p_input, "EsOutProgramEpg: Setting Title to %s from ESNowPlaying", psz_nowplaying );
+            input_item_SetMeta( input_priv(p_input)->p_item, vlc_meta_Title, psz_nowplaying );
+        }
+        else
+        {
+            msg_Dbg( p_input, "EsOutProgramEpg: ESNowPlaying is NULL, not setting Title" );
+        }
         input_SendEventMeta( p_input );
 
         const char *now_playing_tr =
@@ -2110,7 +2122,18 @@ static void EsOutMeta(es_out_sys_t *p_sys, const vlc_meta_t *p_meta, const vlc_m
     {
         const char *psz_nowplaying = vlc_meta_Get( p_program_meta, vlc_meta_ESNowPlaying );
         if( psz_nowplaying )
-            vlc_meta_SetNowPlaying( p_item->p_meta, psz_nowplaying );
+        {
+            msg_Dbg( p_input, "EsOutMeta: Setting Title to %s from ESNowPlaying", psz_nowplaying );
+            vlc_meta_SetTitle( p_item->p_meta, psz_nowplaying );
+        }
+        else
+        {
+            msg_Dbg( p_input, "EsOutMeta: ESNowPlaying is NULL in p_program_meta, not setting Title" );
+        }
+    }
+    else
+    {
+        msg_Dbg( p_input, "EsOutMeta: p_program_meta is NULL, ignoring" );
     }
     vlc_mutex_unlock( &p_item->lock );
 
-- 
2.39.1


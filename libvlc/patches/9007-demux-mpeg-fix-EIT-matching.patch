From 2ccf09d099f06552615d8d82a34b3e8b3ca0d5d3 Mon Sep 17 00:00:00 2001
From: ci7lus <7887955+ci7lus@users.noreply.github.com>
Date: Sat, 14 Feb 2026 20:39:48 +0900
Subject: [PATCH 1/3] demux/mpeg: fix EIT matching

---
 modules/demux/mpeg/ts_si.c | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

diff --git a/modules/demux/mpeg/ts_si.c b/modules/demux/mpeg/ts_si.c
index 6a23825d59..1c9d365089 100644
--- a/modules/demux/mpeg/ts_si.c
+++ b/modules/demux/mpeg/ts_si.c
@@ -398,8 +398,9 @@ static void TDTCallBack( void *opaque, dvbpsi_tot_t *p_tdt )
            DVB TOT should include DTS offset in descriptor 0x58 (including DST),
            but as there's no DST in JAPAN (since Showa 27/1952)
            and considering that no-one seems to send TDT or desc 0x58,
-           falling back on fixed offset is safe */
-        p_sys->i_network_time += 9 * 3600;
+           falling back on fixed offset is safe.
+           JST is UTC+9, so we subtract 9 hours to get UTC. */
+        p_sys->i_network_time -= 9 * 3600;
     }
 
     /* Because libdvbpsi is broken and deduplicating timestamp tables,
@@ -540,8 +541,8 @@ static void EITCallBack( void *opaque, dvbpsi_eit_t *p_eit )
         /* We have to fix ARIB-B10 as all timestamps are JST */
         if( p_sys->standard == TS_STANDARD_ARIB )
         {
-            /* See comments on TDT callback */
-            i_start += 9 * 3600;
+            /* See comments on TDT callback. JST is UTC+9. */
+            i_start -= 9 * 3600;
         }
 
         msg_Dbg( p_demux, "  * event id=%"PRIu16" start_time:%"PRId64" duration=%d "
-- 
2.39.1

